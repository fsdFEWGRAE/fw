<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GLOM Authorization</title>
<style>
body { background:#000; color:#fff; font-family:Arial }
.card { border:1px solid #333; padding:15px; margin:10px }
button { background:#b00000; color:#fff; border:none; padding:6px 12px; cursor:pointer }
.hidden { display:none }
input { padding:6px; margin:4px 0 }
</style>
</head>
<body>

<h2>GLOM Authorization Panel</h2>

<div id="loginCard" class="card">
  <input id="user" placeholder="Username"><br>
  <input id="pass" type="password" placeholder="Password"><br>
  <input id="totp" placeholder="2FA (if enabled)"><br><br>
  <button id="loginBtn" onclick="login()">Login</button>
</div>

<script>
const el = id => document.getElementById(id);

function login() {
  el("loginBtn").disabled = true;
  fetch("/auth/login", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      username: el("user").value.trim(),
      password: el("pass").value,
      totp: el("totp").value.trim()
    })
  })
  .then(async r => {
    const d = await r.json().catch(()=>({}));
    if (!r.ok) { alert(d.error || "Login failed"); return; }
    alert("Login success âœ”");
  })
  .catch(()=>alert("Connection error"))
  .finally(()=> el("loginBtn").disabled = false);
}
</script>

</body>
</html>
